# Configuración de Nginx para Mac
# Ubicación típica en Mac: /opt/homebrew/etc/nginx/nginx.conf
# O en instalaciones Intel: /usr/local/etc/nginx/nginx.conf

# Este bloque va DENTRO de la sección http { ... }

server {
    listen 8080;
    server_name localhost;
    
    # IMPORTANTE: Cambia esta ruta a donde esté tu proyecto
    root /Users/TU_USUARIO/binance-dashboard-iis/dist;
    index index.html;

    # Soporte para React Router
    location / {
        try_files $uri $uri/ /index.html;
    }

    # Cache para assets estáticos (JS, CSS, imágenes, fuentes)
    location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$ {
        expires 1y;
        add_header Cache-Control "public, immutable";
    }

    # Desactivar cache para index.html
    location = /index.html {
        add_header Cache-Control "no-cache, no-store, must-revalidate";
        expires 0;
    }

    # Logs (opcional pero útil para debugging)
    access_log /opt/homebrew/var/log/nginx/binance-dashboard-access.log;
    error_log /opt/homebrew/var/log/nginx/binance-dashboard-error.log;

    # Gzip compression
    gzip on;
    gzip_vary on;
    gzip_min_length 1024;
    gzip_types text/plain text/css text/xml text/javascript application/javascript application/xml+rss application/json;
}

# Comandos útiles de Nginx en Mac:
#
# Iniciar:     brew services start nginx
# Detener:     brew services stop nginx
# Reiniciar:   brew services restart nginx
# Verificar:   nginx -t
# Ver logs:    tail -f /opt/homebrew/var/log/nginx/error.log
